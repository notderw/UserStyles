/* ==UserStyle==
@name           Chegg Dark
@namespace      github.com/notderw/UserStyles
@version        0.0.1
@description    Dark mode for Chegg
@author         derw.xyz
@homepageURL    https://github.com/notderw/UserStyles/Chegg-Dark
@license        MIT
==/UserStyle== */

@import "../../mixins";
@import "variables";

@-moz-document domain("chegg.com") {
    html, body,
    body.desktop.chegg-css,
    body.mobile.chegg-css {
        background: $body-background-color;
    }

    body {
        color: $body-text-color;
    }

    // HEADER
    .header-placeholder,
    .chgg-hdr,
    .C-global-cheggheader-searchbox.expanded .chg-header-autosuggest {
        background: $header-background-color;
    }

    .chgg-hdr-navigation .nav-item .nav-item-header,
    .chgg-hdr-navigation .nav-item-pipe .nav-item-header,
    .C-global-cheggheader-rightsection-notifications .chg-hdr-notifications.embed-js#notifications-component #notifications-button #notifications-icon,
    .chgg-menu-container .chgg-menu-icon {
        color: $header-text-color;
    }

    // DROPDOWN NAV
    nav.chgg-menu {
        &.split-nav, .carrot {
            background: $header-background-color;
            border-color: $border-color;
        }

        span, .chgg-menu-image {
            color: $header-text-color;
        }
    }

    // BODY TEXT COLOR (#555 ish)
    .txt-body,
    .tutor-row .tutor-info .name,
    #enhanced-content-component,
    .mytbs .mytbs-subheader,
    .recommended-questions-problems .question-div .question-link .q-txt,
    .recommended-questions .question-div .question-link .q-txt,
    .recommended-questions-problems .question-div .question-link,
    .recommended-questions .question-div .question-link,
    .global-breadcrumb.txt-2-small a,
    .global-breadcrumb.txt-2-small,
    #solutionHeader .edition-text,
    .C-common-overlay-tooltip,
    .C-global-cheggheader-rightsection-usermenu .nav-item .hover-box ul li a,
    div[id].C-oc-questionasked .empty-state .value-prop-empty-state-list li span,
    .chegg-general-attach .generalattach .chg-list > li > span,
    .chegg-general-attach .generalattach ol > li > span,
    .chegg-general-attach .generalattach ul > li > span {
        color: $body-text-color;
    }

    // TITLE COLORS (#333 ish)
    .mytbs .mytbs-header,
    .C-common-question-form .title,
    #enhanced-content-component .guidance-header,
    #enhanced-content-component .steps-header,
    .toolbar .button,
    #toc-button,
    .TutorList__headline--black,
    .crs-widget .title,
    .content-container,
    .content-container .s-title,
    .txt-hdr-top span,
    .C-page-my-modules-mystuff-profile .profile .profile-info h1,
    div[id].C-oc-questionasked .oc-qa-title,
    .chegg-general-attach .generalattach .component-title {
        color: $text-title-color;
    }

    // BORDERS
    hr,
    .mytbs,
    .right-sidebar .post-new-question-form,
    .answer-heading:first-child,
    .tutor-container.white,
    ul.answers-list > li,
    #enhanced-content-component #general-guidance,
    #enhanced-content-component #steps,
    #enhanced-content-component #steps > div,
    #enhanced-content-component .answer-header,
    .question-toolbar-item,
    .mytbs .mytbs-placeholderbook .placeholderbook-content,
    .recommended-questions-problems .heading,
    .recommended-questions .heading,
    .recommended-questions-problems .question-div,
    .recommended-questions .question-div,
    .C-chegg-footer nav,
    #right-rail .post-question,
    .toolbar,
    section.problem .problem-content,
    .TBSPlayer .main,
    .step,
    .crs-widget,
    :last-child > .step,
    .comment-box .comments-toggle,
    #related-anchors div,
    .toolbar .toggle-button-toolbar,
    .toolbar .mobile-btn,
    .toolbar .show-hide-all,
    .toolbar .bookmark-tab,
    .toolbar .fullscreen,
    .TutorList__container,
    .video-walkthrough,
    .C-common-overlay-tooltip .tooltip .grey-border,
    .C-global-cheggheader-rightsection-usermenu .nav-item.user-item .user-hover-content ul,
    div[id].C-oc-questionasked .chegg-question-asked.border,
    .OC-component-mytbs .my-tbs,
    .chegg-general-attach .generalattach,
    .C-page-my-modules-mystuff-profile,
    .avatar-comments {
        border-color: $border-color;
    }

    // BACKGROUND COLOR
    .toc,
    .text-me-app-container.app-promotion .tooltip.text-me-the-app-new-design,
    .C-common-overlay-tooltip .tooltip .tooltip-content,
    .C-global-cheggheader-rightsection-usermenu .nav-item .hover-box,
    div.C-cheggauth .auth-body .auth_collector .auth-collector-content,
    .C-page-my .column#first, .C-page-my .column#middle {
        background: $body-background-color;
    }

    // BACKGROUND ACCENT COLOR
    #enhanced-content-component .step-answer,
    .recommended-questions-problems .question-div:hover,
    .recommended-questions .question-div:hover,
    .tutor-row:hover,
    .video-walkthrough,
    .toolbar,
    #related-anchors div,
    .toolbar .toggle-button-toolbar,
    .toolbar .button,
    .step .step-header,
    .outer-container a.inner-container:hover,
    .C-global-cheggheader-rightsection-usermenu .nav-item.user-item .user-hover-content .profile,
    .C-page-my-modules-mystuff-profile .profile-box,
    .C-page-my-modules-mystuff-profile .profile-box:hover {
        background: $body-background-accent-color;
    }

    // BACKGROUND RESETS
    .chg-global-content,
    .C-common-question-form,
    .tutor-row,
    .tutor-container.white,
    #enhanced-content-component .expl-content,
    #enhanced-content-component .hint-content,
    #enhanced-content-component .mistakes-content,
    .TutorList__container--vertical,
    nav.chgg-menu li,
    .TBSPlayer,
    .TutorProfileBox,
    .C-global-cheggheader-rightsection-usermenu .nav-item .hover-box ul li,
    div[id].C-oc-questionasked .chegg-question-asked,
    .OC-component-mytbs .my-tbs,
    .C-page-my .first-middle-wrapper,
    .chegg-general-attach .generalattach,
    .avatar-comments {
        background: initial;
    }

    // INPUTS

    textarea,
    input[type="email"],
    input[type="number"],
    input[type="password"],
    input[type="search"],
    input[type="tel"],
    input[type="text"],
    input[type="url"],
    .chg-header-autosuggest .autosuggest-input-field:focus,
    .C-global-cheggheader-searchbox.expanded .chg-header-autosuggest .chg-search-form #header-autosuggest-input,
    .C-global-cheggheader-searchbox.expanded .chg-header-autosuggest .chg-search-form #header-autosuggest-input:focus,
    .leave-comment textarea {
        background: $body-background-color;
        border-color: $border-color;
    }

    input[type="email"].form-input-lg,
    input[type="email"].form-input-sm,
    input[type="number"].form-input-lg,
    input[type="number"].form-input-sm,
    input[type="password"].form-input-lg,
    input[type="password"].form-input-sm,
    input[type="search"].form-input-lg,
    input[type="search"].form-input-sm,
    input[type="tel"].form-input-lg,
    input[type="tel"].form-input-sm,
    input[type="text"].form-input-lg,
    input[type="text"].form-input-sm,
    input[type="url"].form-input-lg,
    input[type="url"].form-input-sm,
    textarea.form-textarea-lg,
    textarea.form-textarea-mini,
    textarea.form-textarea-sm,
    .C-common-question-form textarea,
    .leave-comment textarea {
        color: $body-text-color;
    }

    // BUTTONS
    .C-global-cheggheader-searchbox.expanded .chg-header-autosuggest .chg-search-form a[data-type="button"].autosuggest-search-btn {
        border-color: $border-color;
    }

    // "TRANSPARENT" BUTTONS
    .content-feedback .C-Eggshell-homeworkhelp-thumbrating .rating-block,
    .tutor-row .tutor-likes,
    .review-box .button-wrapper .thumb {
        background: $body-background-color;
        border-color: $border-color;
        color: $button-text-color;
    }

    // "LIFTED" BUTTONS
    .btn-flat-lg,
    .btn-flat-mini,
    .btn-flat-sm,
    .btn-primary-mini,
    .btn-primary.btn-mini,
    .btn-search-mini,
    .btn-secondary,
    .btn-secondary-dk-mini,
    .btn-secondary-flat,
    .btn-secondary-lg,
    .btn-secondary-mini,
    .btn-secondary-sm,
    .btn-special.btn-mini {
        background: $body-background-accent-color;
        border-color: $border-color;
        color: $button-text-color;
    }

    // ==============================

    #enhanced-content-component #general-guidance::before {
        background-image: linear-gradient(rgba($body-background-color,0), $body-background-color 77%);
    }

    // LOGIN FORM
    div.C-cheggauth {
        .auth-body .auth_collector .auth-collector-content .header-block {
            .title {
                color: $text-title-color;
            }
            .sub-title {
                color: $body-text-color;
            }
        }

        .form-input-lg,
        .form-input-lg.form-input-mini,
        .form-input-lg.small,
        .form-input-sm,
        .form-input-sm.form-input-mini,
        .form-input-sm.small,
        .txt-input,
        .txt-input.form-input-mini,
        .txt-input.small,
        input.form-input-mini[type="email"],
        input.form-input-mini[type="password"],
        input.form-input-mini[type="search"],
        input.form-input-mini[type="tel"],
        input.form-input-mini[type="text"],
        input.small[type="email"],
        input.small[type="password"],
        input.small[type="search"],
        input.small[type="tel"],
        input.small[type="text"],
        input[type="checkbox"] + .form-checkbox::after,
        input[type="checkbox"] + .form-checkbox::before,
        input[type="email"],
        input[type="password"],
        input[type="search"],
        input[type="tel"],
        input[type="text"],
        .auth-body input:focus {
            border-color: $border-color;
            color: $body-text-color;
        }

        .C-cheggauth-ssoControl {
            .divider-image {
                border-color: $border-color;

                &::after {
                    background: $body-background-color;
                    color: $body-text-color;
                }
            }

            .sso-field {
                background: $body-background-color;
            }

            .sso-field, .sso-field li.sso-section {
                border-color: $border-color;
            }
        }
    }

    // TOOLTIP ARROW
    .C-common-overlay-tooltip.tooltip-bottom .tooltip-arrow-top::before,
    .C-common-overlay-tooltip.tooltip-bottom .tooltip-arrow-top::after,
    .avatar-comments::after {
        border-bottom-color: $background-color;
    }
    .C-common-overlay-tooltip.tooltip-bottom .tooltip-arrow-top::before,
    .avatar-comments::before {
        border-bottom-color: $border-color;
    }

    #enhanced-content-component #steps .step-text p img,
    #enhanced-content-component .final-answers p img,
    #enhanced-content-component .step-answer p img,
    .question .question-body img,
    .answers-list .answer-given-body img,
    .problem-html img,
    .step-html img,
    .inner-container .img-container {
        @include invert-image;
    }
}
